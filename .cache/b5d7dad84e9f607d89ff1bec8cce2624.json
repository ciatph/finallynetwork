{"id":"../../node_modules/finallycomments/src/index.js","dependencies":[{"name":"/Users/sam/Documents/Projects/steem/finallynetwork/node_modules/finallycomments/package.json","includedInParent":true,"mtime":1535982388082},{"name":"/Users/sam/Documents/Projects/steem/finallynetwork/package.json","includedInParent":true,"mtime":1536781094103},{"name":"/Users/sam/Documents/Projects/steem/finallynetwork/.babelrc","includedInParent":true,"mtime":1535982004941},{"name":"iframe-resizer","loc":{"line":1,"column":22},"parent":"/Users/sam/Documents/Projects/steem/finallynetwork/node_modules/finallycomments/src/index.js","resolved":"/Users/sam/Documents/Projects/steem/finallynetwork/node_modules/iframe-resizer/index.js"}],"generated":{"js":"const frame = require('iframe-resizer')\nconst finallySystem = {}\n\nfinallySystem.init = () => {\n    window.addEventListener('message', finallySystem.receiveMessage, false);\n    finallySystem.checkForEmbedSelector('.finally-comments')\n}\n\nfinallySystem.receiveMessage = (event) => {\n  if (event.data.message == 'new-comment'){\n    if (event.origin !== 'https://finallycomments.com' ) return;\n    let frameOffset = finallySystem.getDistanceFromTop(document.querySelector('.finallycomments__frame'))\n    let frameHeight = document.querySelector('.finallycomments__frame').getBoundingClientRect().height;\n\n    if ( event.data.depth === undefined || event.data.depth === 0 ){\n      document.documentElement.scrollTop = ( frameOffset +  frameHeight )\n    } else {\n      document.documentElement.scrollTop = ( event.data.offset +  frameOffset - 300)\n    }\n  }\n}\n\nfinallySystem.getDistanceFromTop = (element) => {\n    let yPos = 0;\n    while(element) {\n        yPos += (element.offsetTop);\n        element = element.offsetParent;\n    }\n    return yPos;\n}\n\nfinallySystem.getPartsFromLink = (url) => {\n    let lastChar = url.substr(url.length -1);\n    if (lastChar === '/') url = url.slice(0, -1);\n    let parts = url.split('/')\n    return {\n      permlink: parts.pop(),\n      author: parts.pop(),\n      category: parts.pop()\n    }\n}\n\nfinallySystem.createUrlParams = (embedType, url, options)  => {\n  let settings = { message: 'finally-frame-load' }\n  settings = Object.assign(settings, options)\n  Object.keys(settings).map((key, index) =>  settings[key] = settings[key] ? settings[key].toString() : '' );\n  if(embedType === 'steem') return finallySystem.getPartsFromLink(url)\n  if(embedType === 'thread') return { permlink: `${url}`, author: `@${settings.username}`, category: 'finallycomments' }\n}\n\nfinallySystem.createFrame = (embedType, url, options) => {\n  let urlParams = finallySystem.createUrlParams(embedType, url, options )\n  let settings = Object.assign({generated: false, message: 'finally-frame-load'}, options)\n  let iframe = document.createElement('iframe', { scrolling: 'no' })\n  iframe.src = `https://finallycomments.com/thread/${urlParams.category}/${urlParams.author}/${urlParams.permlink}`\n  iframe.width = '100%'\n  iframe.style = 'border: none;'\n  iframe.classList.add('finallycomments__frame')\n  iframe.onload = () => {\n    document.querySelector('.finallycomments__frame').contentWindow.postMessage(settings,'*')\n    frame.iframeResizer( {}, '.finallycomments__frame');\n  }\n  return iframe\n}\n\nfinallySystem.loadEmbed = (selector) => {\n  let container = document.querySelector(selector)\n  let embedType = container.dataset.api ? 'thread' : 'steem'\n  let url = container.dataset.id\n  let options = {\n    message: 'finally-frame-load',\n    reputation: container.dataset.reputation,\n    profile: container.dataset.profile,\n    values: container.dataset.values,\n    generated: container.dataset.generated,\n    beneficiary: container.dataset.beneficiary,\n    beneficiaryWeight: container.dataset.beneficiaryWeight,\n    guestComments: container.dataset.guestComments\n  }\n  let iframe = finallySystem.createFrame(embedType, url, options)\n  container.appendChild(iframe)\n}\n\nfinallySystem.checkForEmbedSelector = (selector) => {\n  let embedFound = document.querySelector(selector) !== null ? true : false\n  if (embedFound) finallySystem.loadEmbed(selector)\n}\n\nmodule.exports.loadFromSteemitUrl = (steemitUrl, options) => {\n  let settings = Object.assign({generated: false}, options || {})\n  return finallySystem.createFrame('steem', steemitUrl, settings)\n}\n\nmodule.exports.loadThread = (slug, username, options) => {\n  if (username === undefined || typeof username !== 'string') throw 'Username must be specified when using appendTo - Thread'\n  let settings = Object.assign({generated: true, username}, options)\n  return finallySystem.createFrame('thread', slug, settings)\n}\n\nmodule.exports.appendTo = (selector, embedType, id, username, options) => {\n  if (typeof username !== 'string') options = username\n  if(embedType === 'steem'){\n    return document.querySelector(selector).appendChild(module.exports.loadFromSteemitUrl(id, options || {}))\n  }\n  if(embedType === 'thread'){\n    return document.querySelector(selector).appendChild(module.exports.loadThread(id, username, options || {}))\n  }\n  throw 'embedType must be specificed as \"steem\" or \"thread\"'\n}\n\nmodule.exports.directThreadLink = (embedType, url, options) => {\n  let urlParams = finallySystem.createUrlParams(embedType, url, options || {})\n  return `https://finallycomments.com/viewer/${urlParams.category}/${urlParams.author}/${urlParams.permlink}`\n}\n\nmodule.exports.loadEmbed = (selector) => {\n  let embedFound = document.querySelector(selector) !== null ? true : false\n  if (embedFound){\n    finallySystem.loadEmbed(selector)\n  } else {\n    throw `Embed Code must be included and selector must match - ${selector}`\n  }\n}\n\nmodule.exports.init = () => {\n  finallySystem.init()\n}\n\nwindow['finallyComments'] = finallySystem\n","map":{"mappings":[{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":42,"column":0},"generated":{"line":42,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":43,"column":0},"generated":{"line":43,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":44,"column":0},"generated":{"line":44,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":45,"column":0},"generated":{"line":45,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":46,"column":0},"generated":{"line":46,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":47,"column":0},"generated":{"line":47,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":48,"column":0},"generated":{"line":48,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":49,"column":0},"generated":{"line":49,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":50,"column":0},"generated":{"line":50,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":51,"column":0},"generated":{"line":51,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":52,"column":0},"generated":{"line":52,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":53,"column":0},"generated":{"line":53,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":54,"column":0},"generated":{"line":54,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":55,"column":0},"generated":{"line":55,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":56,"column":0},"generated":{"line":56,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":57,"column":0},"generated":{"line":57,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":58,"column":0},"generated":{"line":58,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":59,"column":0},"generated":{"line":59,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":60,"column":0},"generated":{"line":60,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":61,"column":0},"generated":{"line":61,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":62,"column":0},"generated":{"line":62,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":63,"column":0},"generated":{"line":63,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":64,"column":0},"generated":{"line":64,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":65,"column":0},"generated":{"line":65,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":66,"column":0},"generated":{"line":66,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":67,"column":0},"generated":{"line":67,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":68,"column":0},"generated":{"line":68,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":69,"column":0},"generated":{"line":69,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":70,"column":0},"generated":{"line":70,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":71,"column":0},"generated":{"line":71,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":72,"column":0},"generated":{"line":72,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":73,"column":0},"generated":{"line":73,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":74,"column":0},"generated":{"line":74,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":75,"column":0},"generated":{"line":75,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":76,"column":0},"generated":{"line":76,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":77,"column":0},"generated":{"line":77,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":78,"column":0},"generated":{"line":78,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":79,"column":0},"generated":{"line":79,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":80,"column":0},"generated":{"line":80,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":81,"column":0},"generated":{"line":81,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":82,"column":0},"generated":{"line":82,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":83,"column":0},"generated":{"line":83,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":84,"column":0},"generated":{"line":84,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":85,"column":0},"generated":{"line":85,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":86,"column":0},"generated":{"line":86,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":87,"column":0},"generated":{"line":87,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":88,"column":0},"generated":{"line":88,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":89,"column":0},"generated":{"line":89,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":90,"column":0},"generated":{"line":90,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":91,"column":0},"generated":{"line":91,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":92,"column":0},"generated":{"line":92,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":93,"column":0},"generated":{"line":93,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":94,"column":0},"generated":{"line":94,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":95,"column":0},"generated":{"line":95,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":96,"column":0},"generated":{"line":96,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":97,"column":0},"generated":{"line":97,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":98,"column":0},"generated":{"line":98,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":99,"column":0},"generated":{"line":99,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":100,"column":0},"generated":{"line":100,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":101,"column":0},"generated":{"line":101,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":102,"column":0},"generated":{"line":102,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":103,"column":0},"generated":{"line":103,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":104,"column":0},"generated":{"line":104,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":105,"column":0},"generated":{"line":105,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":106,"column":0},"generated":{"line":106,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":107,"column":0},"generated":{"line":107,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":108,"column":0},"generated":{"line":108,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":109,"column":0},"generated":{"line":109,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":110,"column":0},"generated":{"line":110,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":111,"column":0},"generated":{"line":111,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":112,"column":0},"generated":{"line":112,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":113,"column":0},"generated":{"line":113,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":114,"column":0},"generated":{"line":114,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":115,"column":0},"generated":{"line":115,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":116,"column":0},"generated":{"line":116,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":117,"column":0},"generated":{"line":117,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":118,"column":0},"generated":{"line":118,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":119,"column":0},"generated":{"line":119,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":120,"column":0},"generated":{"line":120,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":121,"column":0},"generated":{"line":121,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":122,"column":0},"generated":{"line":122,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":123,"column":0},"generated":{"line":123,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":124,"column":0},"generated":{"line":124,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":125,"column":0},"generated":{"line":125,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":126,"column":0},"generated":{"line":126,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":127,"column":0},"generated":{"line":127,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":128,"column":0},"generated":{"line":128,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":129,"column":0},"generated":{"line":129,"column":0}},{"source":"../../node_modules/finallycomments/src/index.js","original":{"line":130,"column":0},"generated":{"line":130,"column":0}}],"sources":{"../../node_modules/finallycomments/src/index.js":"const frame = require('iframe-resizer')\nconst finallySystem = {}\n\nfinallySystem.init = () => {\n    window.addEventListener('message', finallySystem.receiveMessage, false);\n    finallySystem.checkForEmbedSelector('.finally-comments')\n}\n\nfinallySystem.receiveMessage = (event) => {\n  if (event.data.message == 'new-comment'){\n    if (event.origin !== 'https://finallycomments.com' ) return;\n    let frameOffset = finallySystem.getDistanceFromTop(document.querySelector('.finallycomments__frame'))\n    let frameHeight = document.querySelector('.finallycomments__frame').getBoundingClientRect().height;\n\n    if ( event.data.depth === undefined || event.data.depth === 0 ){\n      document.documentElement.scrollTop = ( frameOffset +  frameHeight )\n    } else {\n      document.documentElement.scrollTop = ( event.data.offset +  frameOffset - 300)\n    }\n  }\n}\n\nfinallySystem.getDistanceFromTop = (element) => {\n    let yPos = 0;\n    while(element) {\n        yPos += (element.offsetTop);\n        element = element.offsetParent;\n    }\n    return yPos;\n}\n\nfinallySystem.getPartsFromLink = (url) => {\n    let lastChar = url.substr(url.length -1);\n    if (lastChar === '/') url = url.slice(0, -1);\n    let parts = url.split('/')\n    return {\n      permlink: parts.pop(),\n      author: parts.pop(),\n      category: parts.pop()\n    }\n}\n\nfinallySystem.createUrlParams = (embedType, url, options)  => {\n  let settings = { message: 'finally-frame-load' }\n  settings = Object.assign(settings, options)\n  Object.keys(settings).map((key, index) =>  settings[key] = settings[key] ? settings[key].toString() : '' );\n  if(embedType === 'steem') return finallySystem.getPartsFromLink(url)\n  if(embedType === 'thread') return { permlink: `${url}`, author: `@${settings.username}`, category: 'finallycomments' }\n}\n\nfinallySystem.createFrame = (embedType, url, options) => {\n  let urlParams = finallySystem.createUrlParams(embedType, url, options )\n  let settings = Object.assign({generated: false, message: 'finally-frame-load'}, options)\n  let iframe = document.createElement('iframe', { scrolling: 'no' })\n  iframe.src = `https://finallycomments.com/thread/${urlParams.category}/${urlParams.author}/${urlParams.permlink}`\n  iframe.width = '100%'\n  iframe.style = 'border: none;'\n  iframe.classList.add('finallycomments__frame')\n  iframe.onload = () => {\n    document.querySelector('.finallycomments__frame').contentWindow.postMessage(settings,'*')\n    frame.iframeResizer( {}, '.finallycomments__frame');\n  }\n  return iframe\n}\n\nfinallySystem.loadEmbed = (selector) => {\n  let container = document.querySelector(selector)\n  let embedType = container.dataset.api ? 'thread' : 'steem'\n  let url = container.dataset.id\n  let options = {\n    message: 'finally-frame-load',\n    reputation: container.dataset.reputation,\n    profile: container.dataset.profile,\n    values: container.dataset.values,\n    generated: container.dataset.generated,\n    beneficiary: container.dataset.beneficiary,\n    beneficiaryWeight: container.dataset.beneficiaryWeight,\n    guestComments: container.dataset.guestComments\n  }\n  let iframe = finallySystem.createFrame(embedType, url, options)\n  container.appendChild(iframe)\n}\n\nfinallySystem.checkForEmbedSelector = (selector) => {\n  let embedFound = document.querySelector(selector) !== null ? true : false\n  if (embedFound) finallySystem.loadEmbed(selector)\n}\n\nmodule.exports.loadFromSteemitUrl = (steemitUrl, options) => {\n  let settings = Object.assign({generated: false}, options || {})\n  return finallySystem.createFrame('steem', steemitUrl, settings)\n}\n\nmodule.exports.loadThread = (slug, username, options) => {\n  if (username === undefined || typeof username !== 'string') throw 'Username must be specified when using appendTo - Thread'\n  let settings = Object.assign({generated: true, username}, options)\n  return finallySystem.createFrame('thread', slug, settings)\n}\n\nmodule.exports.appendTo = (selector, embedType, id, username, options) => {\n  if (typeof username !== 'string') options = username\n  if(embedType === 'steem'){\n    return document.querySelector(selector).appendChild(module.exports.loadFromSteemitUrl(id, options || {}))\n  }\n  if(embedType === 'thread'){\n    return document.querySelector(selector).appendChild(module.exports.loadThread(id, username, options || {}))\n  }\n  throw 'embedType must be specificed as \"steem\" or \"thread\"'\n}\n\nmodule.exports.directThreadLink = (embedType, url, options) => {\n  let urlParams = finallySystem.createUrlParams(embedType, url, options || {})\n  return `https://finallycomments.com/viewer/${urlParams.category}/${urlParams.author}/${urlParams.permlink}`\n}\n\nmodule.exports.loadEmbed = (selector) => {\n  let embedFound = document.querySelector(selector) !== null ? true : false\n  if (embedFound){\n    finallySystem.loadEmbed(selector)\n  } else {\n    throw `Embed Code must be included and selector must match - ${selector}`\n  }\n}\n\nmodule.exports.init = () => {\n  finallySystem.init()\n}\n\nwindow['finallyComments'] = finallySystem\n"},"lineCount":130}},"hash":"242baec11f7f3b73421f036a2410fec4","cacheData":{"env":{}}}